{% extends 'base.html' %}
{% load static %}
{% block head %}
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://cdn.jsdelivr.net/npm/flowbite@2.5.1/dist/flowbite.min.css" rel="stylesheet" />
{% endblock head %}
{% block title %}Leaderboard | Olympics{% endblock %}

{% block content %}
<section class="bg-gray-50 dark:bg-gray-900 p-3 sm:p-5" style="margin-top: 200px">
    <div class="mx-auto max-w-screen-xl px-4 lg:px-12">
        <!-- Start coding here -->
        <div class="bg-white dark:bg-gray-800 relative shadow-md sm:rounded-lg" style="height: 800px;">
            <div class="flex flex-col md:flex-row items-center justify-between space-y-3 md:space-y-0 md:space-x-4 p-4">
                <div class="w-full md:w-1/2">
                    <form class="flex items-center">
                        <label for="simple-search" class="sr-only">Search</label>
                        <div class="relative w-full">
                            <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
                                <svg aria-hidden="true" class="w-5 h-5 text-gray-500 dark:text-gray-400"
                                    fill="currentColor" viewbox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd"
                                        d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
                                        clip-rule="evenodd" />
                                </svg>
                            </div>
                            <input type="text" id="simple-search"
                                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full pl-10 p-2 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"
                                placeholder="Search" required="">
                        </div>
                    </form>
                </div>
                <div
                    class="w-full md:w-auto flex flex-col md:flex-row space-y-2 md:space-y-0 items-stretch md:items-center justify-end md:space-x-3 flex-shrink-0">
                    <div class="flex items-center space-x-3 w-full md:w-auto">
                        <button id="sportDropdownButton" data-dropdown-toggle="sportDropdown"
                            class="w-full md:w-auto flex items-center justify-center py-2 px-4 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-primary-700 focus:z-10 focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700"
                            type="button">
                            <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true"
                                class="h-4 w-4 mr-2 text-gray-400" viewbox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd"
                                    d="M3 3a1 1 0 011-1h12a1 1 0 011 1v3a1 1 0 01-.293.707L12 11.414V15a1 1 0 01-.293.707l-2 2A1 1 0 018 17v-5.586L3.293 6.707A1 1 0 013 6V3z"
                                    clip-rule="evenodd"></path>
                            </svg>
                            Sport
                            <svg class="-mr-1 ml-1.5 w-5 h-5" fill="currentColor" viewbox="0 0 20 20"
                                xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                                <path clip-rule="evenodd" fill-rule="evenodd"
                                    d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"></path>
                            </svg>
                        </button>
                        <div id="sportDropdown"
                            class="z-10 hidden w-48 p-3 bg-white rounded-lg shadow dark:bg-gray-700">
                            <ul class="space-y-2 text-sm" aria-labelledby="filterDropdownButton">
                                <li class="flex items-center">
                                    <input type="checkbox" name="sports" value="forward" id="forward"
                                        class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-700 dark:focus:ring-offset-gray-700 focus:ring-2 dark:bg-gray-600 dark:border-gray-500">
                                    <label for="forward"
                                        class="w-full py-2 ms-2 text-sm font-medium text-gray-900 rounded dark:text-gray-300">Forward</label>
                                </li>
                                <li class="flex items-center">
                                    <input type="checkbox" name="sports" value="Shooter" id="Shooter"
                                        class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-700 dark:focus:ring-offset-gray-700 focus:ring-2 dark:bg-gray-600 dark:border-gray-500">
                                    <label for="Shooter"
                                        class="w-full py-2 ms-2 text-sm font-medium text-gray-900 rounded dark:text-gray-300">Shooter</label>
                                </li>
                            </ul>
                        </div>
                        <button id="countryDropdownButton" data-dropdown-toggle="countryDropdown"
                            class="w-full md:w-auto flex items-center justify-center py-2 px-4 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-primary-700 focus:z-10 focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700"
                            type="button">
                            <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true"
                                class="h-4 w-4 mr-2 text-gray-400" viewbox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd"
                                    d="M3 3a1 1 0 011-1h12a1 1 0 011 1v3a1 1 0 01-.293.707L12 11.414V15a1 1 0 01-.293.707l-2 2A1 1 0 018 17v-5.586L3.293 6.707A1 1 0 013 6V3z"
                                    clip-rule="evenodd" />
                            </svg>
                            Country
                            <svg class="-mr-1 ml-1.5 w-5 h-5" fill="currentColor" viewbox="0 0 20 20"
                                xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                                <path clip-rule="evenodd" fill-rule="evenodd"
                                    d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" />
                            </svg>
                        </button>
                        <div id="countryDropdown"
                            class="z-10 hidden w-48 p-3 bg-white rounded-lg shadow dark:bg-gray-700">
                            <h6 class="mb-3 text-sm font-medium text-gray-900 dark:text-white">Choose brand</h6>
                            <ul class="space-y-2 text-sm" aria-labelledby="filterDropdownButton">
                                <li class="flex items-center">
                                    <input type="checkbox" name="sports" value="forward" id="forward"
                                        class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-700 dark:focus:ring-offset-gray-700 focus:ring-2 dark:bg-gray-600 dark:border-gray-500">
                                    <label for="forward"
                                        class="w-full py-2 ms-2 text-sm font-medium text-gray-900 rounded dark:text-gray-300">Forward</label>
                                </li>
                                <li class="flex items-center">
                                    <input id="fitbit" type="checkbox" value=""
                                        class="w-4 h-4 bg-gray-100 border-gray-300 rounded text-primary-600 focus:ring-primary-500 dark:focus:ring-primary-600 dark:ring-offset-gray-700 focus:ring-2 dark:bg-gray-600 dark:border-gray-500">
                                    <label for="fitbit"
                                        class="ml-2 text-sm font-medium text-gray-900 dark:text-gray-100">Microsoft
                                        (16)</label>
                                </li>
                                <li class="flex items-center">
                                    <input id="razor" type="checkbox" value=""
                                        class="w-4 h-4 bg-gray-100 border-gray-300 rounded text-primary-600 focus:ring-primary-500 dark:focus:ring-primary-600 dark:ring-offset-gray-700 focus:ring-2 dark:bg-gray-600 dark:border-gray-500">
                                    <label for="razor"
                                        class="ml-2 text-sm font-medium text-gray-900 dark:text-gray-100">Razor
                                        (49)</label>
                                </li>
                                <li class="flex items-center">
                                    <input id="nikon" type="checkbox" value=""
                                        class="w-4 h-4 bg-gray-100 border-gray-300 rounded text-primary-600 focus:ring-primary-500 dark:focus:ring-primary-600 dark:ring-offset-gray-700 focus:ring-2 dark:bg-gray-600 dark:border-gray-500">
                                    <label for="nikon"
                                        class="ml-2 text-sm font-medium text-gray-900 dark:text-gray-100">Nikon
                                        (12)</label>
                                </li>
                                <li class="flex items-center">
                                    <input id="benq" type="checkbox" value=""
                                        class="w-4 h-4 bg-gray-100 border-gray-300 rounded text-primary-600 focus:ring-primary-500 dark:focus:ring-primary-600 dark:ring-offset-gray-700 focus:ring-2 dark:bg-gray-600 dark:border-gray-500">
                                    <label for="benq"
                                        class="ml-2 text-sm font-medium text-gray-900 dark:text-gray-100">BenQ
                                        (74)</label>
                                </li>
                            </ul>
                        </div>

                    </div>
                </div>
            </div>
            <div class="py-8 px-4 mx-auto max-w-screen-xl lg:py-16 lg:px-6 ">
                <div class="grid gap-8 mb-6 lg:mb-16 md:grid-cols-3 lg:grid-cols-4">
                    <div
                        class="max-w-sm bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700 player">
                        <img class="rounded-t-lg aspect-square"
                            src="https://www.sportsindiashow.com/wp-content/uploads/2021/07/1627178635_manu-bhaker-ap.jpg"/>
                        <div class="p-5">
                            <h5 class="mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white">Manu Bhakar
                            </h5>
                            <div class="grid grid-cols-2">
                                <p class="mb-2 text-sm text-gray-600 dark:text-white">Shooter</p>
                                <p class="mb-2 text-sm text-gray-600 dark:text-white">India</p>
                                <p class="mb-2 text-sm text-gray-600 dark:text-white">height</p>
                                <p class="mb-2 text-sm text-gray-600 dark:text-white">Weight</p>
                                <p class="mb-2 text-sm tracking-tight text-gray-600 dark:text-white">Gold: 10 Medals</p>
                                <p class="mb-2 text-sm tracking-tight text-gray-600 dark:text-white">Silver: 20 Medals
                                </p>
                                <p class="mb-2 text-sm tracking-tight text-gray-600 dark:text-white">Bronze: 20 medals
                                </p>
                                <p class="mb-2 text-sm tracking-tight text-gray-600 dark:text-white">5/4/2001</p>
                            </div>

                        </div>
                    </div>
                    <div
                        class="max-w-sm bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700">
                        <a href="#">
                            <img class="rounded-t-lg"
                                src="https://www.sportsindiashow.com/wp-content/uploads/2019/11/131289-mfukfwpppq-1574309689.jpg"
                                alt="" />
                        </a>
                        <div class="p-5">
                            <a href="#">
                                <h5 class="mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white">
                                    Noteworthy technology acquisitions 2021</h5>
                            </a>
                            <p class="mb-3 font-normal text-gray-700 dark:text-gray-400">Here are the biggest enterprise
                                technology acquisitions of 2021 so far, in reverse chronological order.</p>
                            <a href="#"
                                class="inline-flex items-center px-3 py-2 text-sm font-medium text-center text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">
                                Read more
                                <svg class="rtl:rotate-180 w-3.5 h-3.5 ms-2" aria-hidden="true"
                                    xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 10">
                                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                        stroke-width="2" d="M1 5h12m0 0L9 1m4 4L9 9" />
                                </svg>
                            </a>
                        </div>
                    </div>
                    <div
                        class="max-w-sm bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700">
                        <a href="#">
                            <img class="rounded-t-lg"
                                src="https://www.sportsindiashow.com/wp-content/uploads/2019/11/131289-mfukfwpppq-1574309689.jpg"
                                alt="" />
                        </a>
                        <div class="p-5">
                            <a href="#">
                                <h5 class="mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white">
                                    Noteworthy technology acquisitions 2021</h5>
                            </a>
                            <p class="mb-3 font-normal text-gray-700 dark:text-gray-400">Here are the biggest enterprise
                                technology acquisitions of 2021 so far, in reverse chronological order.</p>
                            <a href="#"
                                class="inline-flex items-center px-3 py-2 text-sm font-medium text-center text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">
                                Read more
                                <svg class="rtl:rotate-180 w-3.5 h-3.5 ms-2" aria-hidden="true"
                                    xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 10">
                                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                        stroke-width="2" d="M1 5h12m0 0L9 1m4 4L9 9" />
                                </svg>
                            </a>
                        </div>
                    </div>
                    <div
                        class="max-w-sm bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700">
                        <img class="rounded-t-lg aspect-square"
                            src="https://www.sportsindiashow.com/wp-content/uploads/2021/07/1627178635_manu-bhaker-ap.jpg"
                            alt="" />
                        <div class="p-5">
                            <h5 class="mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white">Manu Bhakar
                            </h5>
                            <div class="grid grid-cols-2">
                                <p class="mb-2 text-sm text-gray-600 dark:text-white">Shooter</p>
                                <p class="mb-2 text-sm text-gray-600 dark:text-white">India</p>
                                <p class="mb-2 text-sm text-gray-600 dark:text-white">height</p>
                                <p class="mb-2 text-sm text-gray-600 dark:text-white">Weight</p>
                                <p class="mb-2 text-sm tracking-tight text-gray-600 dark:text-white">Gold: 10 Medals</p>
                                <p class="mb-2 text-sm tracking-tight text-gray-600 dark:text-white">Silver: 20 Medals
                                </p>
                                <p class="mb-2 text-sm tracking-tight text-gray-600 dark:text-white">Bronze: 20 medals
                                </p>
                                <p class="mb-2 text-sm tracking-tight text-gray-600 dark:text-white">5/4/2001</p>
                            </div>

                        </div>
                    </div>
                    <div
                        class="max-w-sm bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700">
                        <img class="rounded-t-lg aspect-square"
                            src="https://www.sportsindiashow.com/wp-content/uploads/2021/07/1627178635_manu-bhaker-ap.jpg"
                            alt="" />
                        <div class="p-5">
                            <h5 class="mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white">Manu Bhakar
                            </h5>
                            <div class="grid grid-cols-2">
                                <p class="mb-2 text-sm text-gray-600 dark:text-white">Shooter</p>
                                <p class="mb-2 text-sm text-gray-600 dark:text-white">India</p>
                                <p class="mb-2 text-sm text-gray-600 dark:text-white">height</p>
                                <p class="mb-2 text-sm text-gray-600 dark:text-white">Weight</p>
                                <p class="mb-2 text-sm tracking-tight text-gray-600 dark:text-white">Gold: 10 Medals</p>
                                <p class="mb-2 text-sm tracking-tight text-gray-600 dark:text-white">Silver: 20 Medals
                                </p>
                                <p class="mb-2 text-sm tracking-tight text-gray-600 dark:text-white">Bronze: 20 medals
                                </p>
                                <p class="mb-2 text-sm tracking-tight text-gray-600 dark:text-white">5/4/2001</p>
                            </div>

                        </div>
                    </div>
                    <div
                        class="max-w-sm bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700">
                        <img class="rounded-t-lg aspect-square"
                            src="https://www.sportsindiashow.com/wp-content/uploads/2021/07/1627178635_manu-bhaker-ap.jpg"
                            alt="" />
                        <div class="p-5">
                            <h5 class="mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white">Manu Bhakar
                            </h5>
                            <div class="grid grid-cols-2">
                                <p class="mb-2 text-sm text-gray-600 dark:text-white">Shooter</p>
                                <p class="mb-2 text-sm text-gray-600 dark:text-white">India</p>
                                <p class="mb-2 text-sm text-gray-600 dark:text-white">height</p>
                                <p class="mb-2 text-sm text-gray-600 dark:text-white">Weight</p>
                                <p class="mb-2 text-sm tracking-tight text-gray-600 dark:text-white">Gold: 10 Medals</p>
                                <p class="mb-2 text-sm tracking-tight text-gray-600 dark:text-white">Silver: 20 Medals
                                </p>
                                <p class="mb-2 text-sm tracking-tight text-gray-600 dark:text-white">Bronze: 20 medals
                                </p>
                                <p class="mb-2 text-sm tracking-tight text-gray-600 dark:text-white">5/4/2001</p>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></script>

<script>
    // not exactly vanilla as there is one lodash function
    var allCheckboxes = document.querySelectorAll('input[type=checkbox]');
    console.log(allCheckboxes)
    var allPlayers = Array.from(document.querySelectorAll('.player'));
    console.log(allPlayers)
    var checked = {};

    getChecked('startingReserves');
    getChecked('medal');
    getChecked('sports');
    getChecked('country');
    getChecked('conference');

    Array.prototype.forEach.call(allCheckboxes, function (el) {
        el.addEventListener('change', toggleCheckbox);
    });

    function toggleCheckbox(e) {
        getChecked(e.target.name);
        setVisibility();
    }

    function getChecked(name) {
        checked[name] = Array.from(document.querySelectorAll('input[name=' + name + ']:checked')).map(function (el) {
            return el.value;
        });
    }

    function setVisibility() {
        allPlayers.map(function (el) {
            var startingReserves = checked.startingReserves.length ? _.intersection(Array.from(el.classList), checked.startingReserves).length : true;
            var medal = checked.medal.length ? _.intersection(Array.from(el.classList), checked.medal).length : true;
            var sports = checked.sports.length ? _.intersection(Array.from(el.classList), checked.sports).length : true;
            var country = checked.country.length ? _.intersection(Array.from(el.classList), checked.country).length : true;
            var conference = checked.conference.length ? _.intersection(Array.from(el.classList), checked.conference).length : true;
            if (startingReserves && medal && sports && country && conference) {
                el.style.display = 'block';
            } else {
                el.style.display = 'none';
            }
        });
    }
</script>


<!-- </div>
<div class="table-wrapper">
  <table id="emp-table">
    <thead>
      <th col-index=1>Athlete</th>
      <th col-index=2>Photo</th>

      <th onclick="sortTable(0)" col-index=3>Sport
        <select class="table-filter" onchange="filter_rows()">
          <option value="all"></option>
        </select>
      </th>
      <th onclick="sortTable(1)" col-index=4>Country
        <select class="table-filter" onchange="filter_rows()">
          <option value="all"></option>
        </select>
      </th>
      <th onclick="sortTable(2)" col-index=5>Medals
        <select class="table-filter" onchange="filter_rows()">
          <option value="all"></option>
        </select>
      </th>

    </thead>
    <tbody>
      {% for athelete in athelete_list %}
      <tr>
        <td>{{ athelete.name }}</td>
        <td><img src="{{ athelete.img }}" alt=""></td>
        <td>{{ athelete.sport }}</td>
        <td>{{ athelete.country }}</td>
        <td>{{ athelete.medals }}</td>
      </tr>
      {% endfor %}
      <tr>
        <td>Manu Bhakar</td>
        <td><img src="https://im.indiatimes.in/content/2021/Oct/2_6159482f1e548.JPG" alt=""></td>
        <td>Shit</td>
        <td>India</td>
        <td>2</td>
      </tr>
      <tr>
        <td>Kanu Bhakar</td>
        <td><img
            src="https://images.thequint.com/thequint/2021-08/03052b26-fd71-45ae-8811-88ae22f6e005/thumbnail_07081_ap08_07_2021_000204b.jpg?auto=format%2Ccompress&fmt=webp"
            alt=""></td>
        <td>Shoot</td>
        <td>Pakistan</td>
        <td>1</td>
      </tr>

      <tr>
        <td>Kanu Bhakar</td>
        <td><img
            src="https://images.thequint.com/thequint/2021-08/03052b26-fd71-45ae-8811-88ae22f6e005/thumbnail_07081_ap08_07_2021_000204b.jpg?auto=format%2Ccompress&fmt=webp"
            alt=""></td>
        <td>Shoot</td>
        <td>Pakistan</td>
        <td>1</td>
      </tr>
    </tbody>
  </table>

  <script src="{% static 'filter.js' %}"></script>
    <script>
        window.onload = () => {
            console.log(document.querySelector("#emp-table > tbody > tr:nth-child(1) > td:nth-child(2) ").innerHTML);
        };

        getUniqueValuesFromColumn()
        
    </script>
    <script>
        function sortTable(columnIndex) {
          const table = document.getElementById("emp-table");
          const tbody = table.querySelector("tbody");
          const rows = Array.from(tbody.rows);
          let ascending = table.dataset.sortOrder === 'asc';
          

          rows.sort((rowA, rowB) => {
            const cellA = rowA.cells[columnIndex + 2].innerText.toLowerCase();
            const cellB = rowB.cells[columnIndex + 2].innerText.toLowerCase();
        
            if (!isNaN(cellA) && !isNaN(cellB)) {
              return ascending ? cellA - cellB : cellB - cellA;
            } else {
              return ascending ? cellA.localeCompare(cellB) : cellB.localeCompare(cellA);
            }
          });
        
          table.dataset.sortOrder = ascending ? 'desc' : 'asc';
          tbody.append(...rows);
        }
        </script>
! -->
{% endblock content %}